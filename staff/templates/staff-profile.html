{% extends "base.html" %}
{% load static %}

{% block content %} 

{% comment %} 
STAN'S ORIGINAL Link
<a href="{% url 'customer-list' %}">Back to list</a> <br> 
{% endcomment %}

<div class='col-12'>


<div class='card mb-5 pb-0'>
    <div class='card-header'>

        <div class='mb-3'>
            <a href="{% url 'staff-list' %}"  onclick='event.preventDefault();window.history.back()' class='text-muted font-weight-bold fx fx-link'>
                <i class="fas fa-angle-left text-muted"></i>
                Back
            </a>
        </div>

        <h3 class=" mb-0 card-title">Details for <span class='font-weight-bold'>{{user.first_name}} {{user.last_name}}</span></h3>
        <p class='mb-0'>
            <a href='{% url 'staff-profile-edit' %}'>
                Edit your profile
            </a>
        </p>
    </div>
    <div class='card-body p-0'>
        <table class="table table-striped mb-0">
                <thead class="grey white-text">
                <tr>
                    <th class='align-baseline' scope="col">Email</th>
                    <th class='align-baseline' scope="col">Phone Number(s)</th>
                    <th class='align-baseline' scope="col">Access to Sections</th>
                </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class=''>
                            {{user.email}}
                        </td>
                        <td>
                            <i class="fas fa-home text-muted"></i> {{user.mobileNumber}}
                        </td>
                        <td class='clickable position-relative align-middle' data-toggle="tooltip" data-placement="left" data-html="true" title='Edit Access Control'>
                            {% comment %} DISPLAY "NO SECTIONS" if the user doesn't have access to any sections {% endcomment %}
                            
                            {% if user.user_permissions.all.count == 0 %}
                                No sections.
                            {% endif %}

                            {% for perm in user.user_permissions.all %}
                                {% comment %} {{perm.codename}} {% endcomment %}

                                <div style='max-width:150px;'>
                                    {% if perm.codename == 'view_dashboard' %}
                                        <h6 class='m-0 mb-1 font-weight-bold d-inline-block'>
                                            <span class="badge badge-primary product mr-1 font-weight-bold">
                                                Dashboard
                                            </span>
                                        </h6>

                                        <!-- ============================= -->
                                        
                                        {% elif perm.codename == 'view_product' %}
                                        <h6 class='m-0 mb-1 font-weight-bold d-inline-block'>
                                            <span class="badge badge-primary product mr-1 font-weight-bold">
                                                Products
                                            </span>
                                        </h6>

                                        <!-- ============================= -->
                                        
                                        {% elif perm.codename == 'view_order' %}
                                        <h6 class='m-0 mb-1 font-weight-bold d-inline-block'>
                                            <span class="badge badge-primary product mr-1 font-weight-bold">
                                                Orders
                                            </span>
                                        </h6>

                                        <!-- ============================= -->
                                        
                                        {% elif perm.codename == 'view_customer' %}
                                        <h6 class='m-0 mb-1 font-weight-bold d-inline-block'>
                                            <span class="badge badge-primary product mr-1 font-weight-bold">
                                                Customers
                                            </span>
                                        </h6>

                                        <!-- ============================= -->

                                        {% elif perm.codename == 'view_carbrand' %}
                                        <h6 class='m-0 mb-1 font-weight-bold d-inline-block'>
                                            <span class="badge badge-primary product mr-1 font-weight-bold">
                                                Cars
                                            </span>
                                        </h6>

                                        <!-- ============================= -->
                                        
                                        {% elif perm.codename == 'view_staff' %}
                                        <h6 class='m-0 mb-1 font-weight-bold d-inline-block'>
                                            <span class="badge badge-primary product mr-1 font-weight-bold">
                                                Staff
                                            </span>
                                        </h6>

                                        <!-- ============================= -->
                                        
                                        {% elif perm.codename == 'view_store' %}
                                        <h6 class='m-0 mb-1 font-weight-bold d-inline-block'>
                                            <span class="badge badge-primary product mr-1 font-weight-bold">
                                                Stores
                                            </span>
                                        </h6>

                                        <!-- ============================= -->
                                        
                                        {% elif perm.codename == 'view_coupon' %}
                                        <h6 class='m-0 mb-1 font-weight-bold d-inline-block'>
                                            <span class="badge badge-primary product mr-1 font-weight-bold">
                                                Coupons
                                            </span>
                                        </h6>

                                        <!-- ============================= -->
                                        
                                        {% elif perm.codename == 'view_promotion' %}
                                        <h6 class='m-0 mb-1 font-weight-bold d-inline-block'>
                                            <span class="badge badge-primary product mr-1 font-weight-bold">
                                                Promotions
                                            </span>
                                        </h6>

                                        

                                        
                                    {% endif %}

                                <div>
                            {% endfor %}
                            </a>
                        </td>
                    </tr>
                </tbody>
    </div>
</div>

{% endblock content %}